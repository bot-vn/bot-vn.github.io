<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Redirecting...</title>
  <script>
    (function() {
      const encoded = location.search.slice(1);
      const username = atob(encoded);

      fetch("https://tiktok.eulerstream.com/webcast/room_info?uniqueId=" + username, {
        headers: { "x-api-key": "YzU5NmUzYWZkYjViZGE1ZjU1ZWZjZmQ0ZTQyOGY0NzI3NjgxMDM3Mjk4ZmJiNDU4NGUzZjQ4" }
      })
      .then(r => r.json())
      .then(j => {
        const roomId = j?.data?.room_info?.id;
        if (roomId) {
          location.replace("https://www.tiktok.com/live/room/" + roomId);
        } else {
          document.body.innerText = "❌ Không tìm thấy livestream.";
        }
      })
      .catch(() => {
        document.body.innerText = "❌ Lỗi khi lấy thông tin.";
      });
    })();
  </script>
</head>
<body>
  <p>⏳ Redirecting...</p>
</body>
</html>
