<!DOCTYPE html>
<html>
<head>
  <meta charset="UTF-8">
  <title>Redirecting...</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <script>
    const BASE62_CHARS = '0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz';
    function base62Decode(str) {
      let result = 0n;
      for (let i = 0; i < str.length; i++) {
        const index = BASE62_CHARS.indexOf(str[i]);
        if (index === -1) throw new Error('Invalid base62');
        result = result * 62n + BigInt(index);
      }
      return result.toString();
    }

    const encoded = location.search.slice(1);
    const roomId = base62Decode(encoded);

    const isIOS = /iphone|ipad|ipod/.test(navigator.userAgent.toLowerCase());
    const tiktokUrl = isIOS
      ? `snssdk1180://live?room_id=${roomId}`
      : `tiktok://live/${roomId}`;

    location.href = tiktokUrl;
  </script>
</head>
<body></body>
</html>
